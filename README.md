–ó–∞—á–µ–º —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç?
–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ log-—Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç Nginx, Apache) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

–¢–æ–ø IP-–∞–¥—Ä–µ—Å–æ–≤ (–∫—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ –æ–±—Ä–∞—â–∞–ª—Å—è)

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É HTTP-—Å—Ç–∞—Ç—É—Å–æ–≤ (—Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ –æ—à–∏–±–æ–∫ 404, 200 –∏ —Ç.–¥.)

–†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑—ã –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ.

–ß—Ç–æ —è –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞–ª:
‚úî –ú–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ—Å—Ç—å (multiprocessing.Pool)
‚úî –ü–∞—Ä—Å–∏–Ω–≥ —Å–ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è)
‚úî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
‚úî CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚úî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CI/CD

üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å?
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/–≤–∞—à-–ª–æ–≥–∏–Ω/log-analyzer.git
cd log-analyzer

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
2. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
bash
# –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —è–¥—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞)
python src/cli.py --file data/access.log

# –° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4 –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ —á–∞–Ω–∫–∏ –ø–æ 20MB)
python src/cli.py --file data/access.log --processes 4 --chunk-size 20
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

–¢–æ–ø-5 IP: [('192.168.1.1', 1420), ('10.0.0.2', 1103)]  
–°—Ç–∞—Ç—É—Å—ã: {'200': 85000, '404': 15000}  
–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 2.31 —Å–µ–∫  
üìä –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏?
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏:
–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Äì —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 3-4 —Ä–∞–∑–∞

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (–¥–∞–∂–µ >10GB)

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª –∏ –∫–æ–Ω—Å–æ–ª—å

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã (pytest)

CI/CD (GitHub Actions)

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
Python 3.8+

Multiprocessing

Regex, Collections

Logging, tqdm (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä)

Pytest, Coverage

üõ† –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
bash
pytest tests/ --cov=src -v
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
bash
pre-commit run --all-files
–°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞
bash
python setup.py bdist_wheel
ü§ù –ö–∞–∫ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É?
–ù–∞—à–ª–∏ –±–∞–≥? –°–æ–∑–¥–∞–π—Ç–µ Issue

–•–æ—Ç–∏—Ç–µ –Ω–æ–≤—É—é —Ñ–∏—á—É? –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

üìú –õ–∏—Ü–µ–Ω–∑–∏—è
MIT ‚Äì –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ, –¥–∞–∂–µ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

–ê–≤—Ç–æ—Ä: [–í–∞—à–µ –∏–º—è]
–í–µ—Ä—Å–∏—è: 0.1.0